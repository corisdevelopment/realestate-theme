---
import { Image } from 'astro:assets'
import Button from '@components/utils/Button.astro'
import testImage from '@assets/77-Aerial-1458-Greenleaf-Court-6.jpg'
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro"
// const testText = [
//   { type: 'paragraph',
//     content: [ {text: 'Holistic.'} ]
//   },
//   { type: 'paragraph',
//     content: [ {text: 'Timelessly modern.'} ]
//   },
//   { type: 'paragraph',
//     content: [ {text: 'Stunning, brilliant, beautiful.'} ]
//   }
// ]
// let wordArray: any = []
// const textArray = testText.forEach( (p) => {
//   const words = p.content[0]?.text.split(' ')
//   const word = words.map( w => {
//     return w + '\xa0'
//   })
//   // console.log(word)
//   wordArray.push(word)
// })
const imgArray = new Array(8).fill({i: "1"})
const { blok, data } = Astro.props
console.log("About: ", data)
---
<section class="about-cta bg-golden-300">
  <div class="container mx-auto max-content max-content-mobile lg:mt-36">
    <h2 class="scrollFadeIn font-cg font-semibold text-golden-950">
      {
        data.textTop?.map((blok: any) => {
          return <StoryblokComponent blok={blok} />
        })
      }
    </h2>
  </div>
  <div class="horizontal-gallery overflow-hidden my-4 lg:my-12 py-4 w-full">
    <div id="line1" class="line-container flex items-end gap-2 my-2 lg:gap-8 lg:my-8">
      {
        data.imageLine1?.map((blok: any) => (
          <div class="image-container min-w-[120px]">
            <StoryblokComponent blok={blok} />
          </div>
        ))
      }
    </div>
    <div id="line2" class="line-container flex items-end gap-2 my-2 lg:gap-8 lg:my-8">
      {
        data.imageLine2?.map((blok: any) => (
          <div class="image-container min-w-[120px]">
            <StoryblokComponent blok={blok} />
          </div>
        ))
      }
    </div>
  </div>
  <div class="container mx-auto max-content max-content-mobile lg:mb-36">
    <h2 class="scrollFadeIn font-cg font-semibold text-golden-950" data-text="Timelessly Moderm">
      {
        data.textBottom?.map((blok: any) => {
          return <StoryblokComponent blok={blok} />
        })
      }
    </h2>
    {
      data.description?.map((blok: any) => {
        return <StoryblokComponent blok={blok} />
      })
    }
  </div>
</section>

<script>
  // let tl = gsap.timeline({
  //   scrollTrigger: {
  //     trigger: '.about-cta',
  //     start: 'top center+=200',
  //     end: 'bottom center+=200',
  //     scrub: 1,
  //     // markers: true
  //   }
  // });
  // gsap.set('#line2', {xPercent: -30});
  // let tween = gsap.to('.word', {duration: 1, opacity: 1, stagger: 1});
  // let scrollLeft = gsap.to('#line1', {xPercent: -40, duration: 10});
  // let scrollRight = gsap.to('#line2', {xPercent: 0, duration: 10});
  // tl.add(tween).add(scrollLeft, "<2").add(scrollRight, "<");
</script>

<style>
  .about-cta {
    padding: 4rem 0;
  }
  .word {
    opacity: 0.2;
    font-size: clamp(2.4em, 5.4vw, 6em);
    line-height: 1.2em;
  }
  .line-container {
    position: relative;
    width: 160%;
  }
</style>